// ============================================
// Ascension Example: Curses TUI
// Interfaccia testuale nel terminale
// ============================================

// NOTA: Questo esempio richiede un terminale
// Non funziona in tutti gli ambienti

print("=== CURSES TUI ===\n");
print("Inizializzazione interfaccia terminale...\n");
print("Premi 'q' per uscire\n");

// Inizializza curses
result = curses_init();

if (result == 0) {
    print("Errore: impossibile inizializzare curses");
} else {
    // Pulisci schermo
    curses_clear();
    
    // Scrivi titolo
    curses_move(0, 2);
    curses_write("=== ASCENSION TUI DEMO ===");
    
    // Scrivi istruzioni
    curses_move(0, 5);
    curses_write("Comandi:");
    curses_move(2, 6);
    curses_write("- Frecce: muovi cursore");
    curses_move(2, 7);
    curses_write("- Spazio: lascia traccia");
    curses_move(2, 8);
    curses_write("- c: pulisci");
    curses_move(2, 9);
    curses_write("- q: esci");
    
    // Posizione iniziale
    pos_x = 40;
    pos_y = 15;
    
    // Disegna cursore iniziale
    curses_move(pos_x, pos_y);
    curses_write("@");
    curses_refresh();
    
    // Loop principale
    running = true;
    while (running) {
        key = curses_read_key();
        
        // Cancella vecchia posizione
        curses_move(pos_x, pos_y);
        curses_write(" ");
        
        // Gestisci input
        if (key == 113) {  // 'q'
            running = false;
        } else if (key == 99) {  // 'c'
            curses_clear();
            curses_move(0, 0);
            curses_write("Schermo pulito - premi 'q' per uscire");
        } else if (key == 32) {  // spazio
            curses_move(pos_x, pos_y);
            curses_write("*");
        } else if (key == 259) {  // freccia su
            if (pos_y > 0) {
                pos_y = pos_y - 1;
            }
        } else if (key == 258) {  // freccia giu'
            pos_y = pos_y + 1;
        } else if (key == 260) {  // freccia sinistra
            if (pos_x > 0) {
                pos_x = pos_x - 1;
            }
        } else if (key == 261) {  // freccia destra
            pos_x = pos_x + 1;
        }
        
        // Disegna nuova posizione
        curses_move(pos_x, pos_y);
        curses_write("@");
        
        // Mostra posizione
        curses_move(0, 23);
        curses_write("Pos: (" + pos_x + ", " + pos_y + ") Key: " + key + "    ");
        
        curses_refresh();
    }
    
    // Chiudi curses
    curses_end();
}

print("\nTUI terminata.");
print("\n=== FINE ESEMPIO ===");
