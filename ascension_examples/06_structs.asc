// ============================================
// Ascension Example: Strutture (Struct)
// Definizione e uso di strutture dati
// ============================================

print("=== STRUTTURE (STRUCT) ===\n");

// Definizione struct (campi separati da virgola)
struct Persona {
    nome,
    eta,
    citta
}

struct Punto {
    x,
    y
}

struct Rettangolo {
    larghezza,
    altezza
}

// Creazione istanze
print("--- Creazione istanze ---");
p1 = new Persona;
p1.nome = "Mario";
p1.eta = 30;
p1.citta = "Roma";

p2 = new Persona;
p2.nome = "Luigi";
p2.eta = 28;
p2.citta = "Milano";

// Accesso ai campi
print("Persona 1:");
print("  Nome: " + p1.nome);
print("  Eta: ", p1.eta);
print("  Citta: " + p1.citta);

print("\nPersona 2:");
print("  Nome: " + p2.nome);
print("  Eta: ", p2.eta);
print("  Citta: " + p2.citta);

// Uso struct Punto
print("\n--- Struct Punto ---");
punto = new Punto;
punto.x = 10;
punto.y = 25;
print("Punto: (" + punto.x + ", " + punto.y + ")");

// Funzione che usa struct
func distanza_origine(pt) {
    // sqrt non disponibile, calcoliamo quadrato
    return pt.x * pt.x + pt.y * pt.y;
}

print("Distanza^2 dall'origine: ", distanza_origine(punto));

// Rettangolo
print("\n--- Struct Rettangolo ---");
rect = new Rettangolo;
rect.larghezza = 5;
rect.altezza = 3;

func area(r) {
    return r.larghezza * r.altezza;
}

func perimetro(r) {
    return 2 * (r.larghezza + r.altezza);
}

print("Rettangolo " + rect.larghezza + "x" + rect.altezza);
print("Area: ", area(rect));
print("Perimetro: ", perimetro(rect));

// Array di struct
print("\n--- Array di Struct ---");

// In Ascension, creiamo l'array assegnando direttamente agli indici
persona_a = new Persona;
persona_a.nome = "Anna";
persona_a.eta = 25;
persona_a.citta = "Napoli";
persone[0] = persona_a;

persona_b = new Persona;
persona_b.nome = "Bruno";
persona_b.eta = 35;
persona_b.citta = "Torino";
persone[1] = persona_b;

persona_c = new Persona;
persona_c.nome = "Carla";
persona_c.eta = 22;
persona_c.citta = "Firenze";
persone[2] = persona_c;

print("Lista persone:");
for (i = 0; i < 3; i = i + 1) {
    print(persone[i].nome + " - " + persone[i].eta + " anni - " + persone[i].citta);
}

// Trova persona piu' giovane
print("\n--- Ricerca ---");
giovane = persone[0];
for (i = 1; i < 3; i = i + 1) {
    if (persone[i].eta < giovane.eta) {
        giovane = persone[i];
    }
}
print("Persona piu' giovane: " + giovane.nome);

print("\n=== FINE ESEMPIO ===");
