// ============================================
// Ascension Example: Canvas e Grafica
// Disegno su canvas Tkinter
// ============================================

print("=== CANVAS E GRAFICA ===\n");
print("Creazione finestra con canvas...\n");

// Crea finestra
root = tk_root("Ascension Canvas Demo");
tk_geometry("500x400");

// Crea canvas
canvas_config = {};
canvas_config["width"] = 480;
canvas_config["height"] = 350;
canvas_config["bg"] = "white";
canvas = tk_widget(root, "Canvas", canvas_config);
pack_config = {};
pack_config["pady"] = 10;
tk_pack(canvas, pack_config);

// -----------------------------------------
// DISEGNO FORME BASE
// -----------------------------------------

// Rettangoli
tk_canvas_rect(canvas, 20, 20, 120, 80, "red");
tk_canvas_rect(canvas, 140, 20, 240, 80, "green");
tk_canvas_rect(canvas, 260, 20, 360, 80, "blue");

// Ovali/Cerchi
tk_canvas_oval(canvas, 20, 100, 100, 180, "yellow");
tk_canvas_oval(canvas, 120, 100, 200, 180, "orange");
tk_canvas_oval(canvas, 220, 100, 300, 180, "purple");

// Linee
tk_canvas_line(canvas, 20, 200, 460, 200, "black");
tk_canvas_line(canvas, 20, 220, 460, 280, "gray");

// Testo
tk_canvas_text(canvas, 240, 320, "Ascension Graphics!", "darkblue");

// -----------------------------------------
// ANIMAZIONE SEMPLICE
// -----------------------------------------

// Variabili globali per animazione
ball_x = 50;
ball_y = 250;
dx = 5;
dy = 3;
ball_id = 0;

// Crea pallina
ball_id = tk_canvas_oval(canvas, ball_x, ball_y, ball_x + 30, ball_y + 30, "red");

// Funzione di animazione
func animate() {
    global ball_x;
    global ball_y;
    global dx;
    global dy;
    global ball_id;
    
    // Muovi pallina
    tk_canvas_move(canvas, ball_id, dx, dy);
    ball_x = ball_x + dx;
    ball_y = ball_y + dy;
    
    // Rimbalzo sui bordi
    if (ball_x <= 0 || ball_x >= 450) {
        dx = 0 - dx;
    }
    if (ball_y <= 0 || ball_y >= 320) {
        dy = 0 - dy;
    }
    
    // Continua animazione
    tk_after(50, "animate");
}

// Avvia animazione
tk_after(100, "animate");

// -----------------------------------------
// DISEGNO INTERATTIVO
// -----------------------------------------

// Bottone per pulire canvas
func clear_canvas() {
    tk_canvas_clear(canvas);
    // Ridisegna pallina
    ball_id = tk_canvas_oval(canvas, ball_x, ball_y, ball_x + 30, ball_y + 30, "red");
}

btn_config = {};
btn_config["text"] = "Pulisci Canvas";
btn_clear = tk_widget(root, "Button", btn_config);
tk_command(btn_clear, "clear_canvas");
tk_pack(btn_clear, {});

// -----------------------------------------
// MAINLOOP
// -----------------------------------------

print("Canvas creato con animazione.");
print("Chiudi la finestra per terminare.");
tk_mainloop();

print("\n=== FINE ESEMPIO ===");
