// ============================================
// Ascension Example: Algoritmi Classici
// Implementazioni di algoritmi famosi
// ============================================

print("=== ALGORITMI CLASSICI ===\n");

// -----------------------------------------
// FIBONACCI
// -----------------------------------------
print("--- Fibonacci ---");

func fib_recursive(n) {
    if (n <= 1) {
        return n;
    }
    return fib_recursive(n - 1) + fib_recursive(n - 2);
}

func fib_iterative(n) {
    if (n <= 1) {
        return n;
    }
    a = 0;
    b = 1;
    for (i = 2; i <= n; i = i + 1) {
        temp = a + b;
        a = b;
        b = temp;
    }
    return b;
}

print("Primi 15 numeri di Fibonacci:");
risultato = "";
for (i = 0; i < 15; i = i + 1) {
    risultato = risultato + fib_iterative(i) + " ";
}
print(risultato);

// -----------------------------------------
// FATTORIALE
// -----------------------------------------
print("\n--- Fattoriale ---");

func fattoriale(n) {
    if (n <= 1) {
        return 1;
    }
    result = 1;
    for (i = 2; i <= n; i = i + 1) {
        result = result * i;
    }
    return result;
}

for (n = 0; n <= 10; n = n + 1) {
    print(n + "! = " + fattoriale(n));
}

// -----------------------------------------
// NUMERI PRIMI
// -----------------------------------------
print("\n--- Numeri Primi ---");

func is_prime(n) {
    if (n < 2) {
        return false;
    }
    if (n == 2) {
        return true;
    }
    if (n % 2 == 0) {
        return false;
    }
    i = 3;
    while (i * i <= n) {
        if (n % i == 0) {
            return false;
        }
        i = i + 2;
    }
    return true;
}

print("Primi 20 numeri primi:");
count = 0;
num = 2;
primi = "";
while (count < 20) {
    if (is_prime(num)) {
        primi = primi + num + " ";
        count = count + 1;
    }
    num = num + 1;
}
print(primi);

// -----------------------------------------
// MCD (Massimo Comun Divisore) - Euclide
// -----------------------------------------
print("\n--- MCD (Euclide) ---");

func mcd(a, b) {
    while (b != 0) {
        temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

print("MCD(48, 18) = " + mcd(48, 18));
print("MCD(100, 35) = " + mcd(100, 35));
print("MCD(17, 13) = " + mcd(17, 13));

// MCM (Minimo Comune Multiplo)
func mcm(a, b) {
    return (a * b) / mcd(a, b);
}

print("MCM(4, 6) = " + mcm(4, 6));
print("MCM(12, 18) = " + mcm(12, 18));

// -----------------------------------------
// BUBBLE SORT
// -----------------------------------------
print("\n--- Bubble Sort ---");

func bubble_sort(arr, n) {
    for (i = 0; i < n - 1; i = i + 1) {
        for (j = 0; j < n - i - 1; j = j + 1) {
            if (arr[j] > arr[j + 1]) {
                // Swap
                temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }
    return arr;
}

numeri = [64, 34, 25, 12, 22, 11, 90];
print("Array originale:");
s = "";
for (i = 0; i < 7; i = i + 1) {
    s = s + numeri[i] + " ";
}
print(s);

bubble_sort(numeri, 7);
print("Array ordinato:");
s = "";
for (i = 0; i < 7; i = i + 1) {
    s = s + numeri[i] + " ";
}
print(s);

// -----------------------------------------
// RICERCA BINARIA
// -----------------------------------------
print("\n--- Ricerca Binaria ---");

func binary_search(arr, n, target) {
    left = 0;
    right = n - 1;
    
    while (left <= right) {
        mid = (left + right) / 2;
        
        if (arr[mid] == target) {
            return mid;
        } else if (arr[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }
    return -1;
}

sorted_arr = [11, 12, 22, 25, 34, 64, 90];
print("Array: [11, 12, 22, 25, 34, 64, 90]");
print("Cerca 25: indice " + binary_search(sorted_arr, 7, 25));
print("Cerca 11: indice " + binary_search(sorted_arr, 7, 11));
print("Cerca 100: indice " + binary_search(sorted_arr, 7, 100));

// -----------------------------------------
// TORRE DI HANOI
// -----------------------------------------
print("\n--- Torre di Hanoi ---");

mosse = 0;

func hanoi(n, from, to, aux) {
    global mosse;
    if (n == 1) {
        print("Muovi disco 1 da " + from + " a " + to);
        mosse = mosse + 1;
        return;
    }
    hanoi(n - 1, from, aux, to);
    print("Muovi disco " + n + " da " + from + " a " + to);
    mosse = mosse + 1;
    hanoi(n - 1, aux, to, from);
}

print("Soluzione per 3 dischi:");
hanoi(3, "A", "C", "B");
print("Totale mosse: " + mosse);

print("\n=== FINE ESEMPIO ===");
